estim.tmle.cont$RR_A2_A1is1.se[estim.tmle.cont$k == i] <- results.cont.tmle$sd.lnRR.A2[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$RR_A2_A1is1.lb[estim.tmle.cont$k == i] <- results.cont.tmle$RR.A2.lo[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$RR_A2_A1is1.ub[estim.tmle.cont$k == i] <- results.cont.tmle$RR.A2.up[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
# a.INT
estim.tmle.cont$a.INT[estim.tmle.cont$k == i] <- results.cont.tmle$a.INT[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$a.INT.se[estim.tmle.cont$k == i] <- results.cont.tmle$sd.a.INT[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$a.INT.lb[estim.tmle.cont$k == i] <- results.cont.tmle$a.INT.lo[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$a.INT.ub[estim.tmle.cont$k == i] <- results.cont.tmle$a.INT.up[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
# RERI
estim.tmle.cont$RERI[estim.tmle.cont$k == i] <- results.cont.tmle$RERI[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$RERI.se[estim.tmle.cont$k == i] <- results.cont.tmle$sd.lnRERI[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$RERI.lb[estim.tmle.cont$k == i] <- results.cont.tmle$RERI.lo[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$RERI.ub[estim.tmle.cont$k == i] <- results.cont.tmle$RERI.up[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
# m.INT
estim.tmle.cont$m.INT[estim.tmle.cont$k == i] <- results.cont.tmle$m.INT[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$m.INT.se[estim.tmle.cont$k == i] <- results.cont.tmle$sd.ln.m.INT[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$m.INT.lb[estim.tmle.cont$k == i] <- results.cont.tmle$m.INT.lo[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
estim.tmle.cont$m.INT.ub[estim.tmle.cont$k == i] <- results.cont.tmle$m.INT.up[results.cont.tmle$A1 == 1 & results.cont.tmle$A2 == 1]
## IPTW estimation
results.cont.iptw <- estim.int.effects(Ycont.ltmle, estimator = "iptw")$int.r
# save results
# p
estim.iptw.cont$p00[estim.iptw.cont$k == i] <- results.cont.iptw$p[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p00.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.p[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p00.lb[estim.iptw.cont$k == i] <- results.cont.iptw$p.lo[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p00.ub[estim.iptw.cont$k == i] <- results.cont.iptw$p.up[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p10[estim.iptw.cont$k == i] <- results.cont.iptw$p[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p10.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.p[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p10.lb[estim.iptw.cont$k == i] <- results.cont.iptw$p.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p10.ub[estim.iptw.cont$k == i] <- results.cont.iptw$p.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$p01[estim.iptw.cont$k == i] <- results.cont.iptw$p[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p01.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.p[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p01.lb[estim.iptw.cont$k == i] <- results.cont.iptw$p.lo[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p01.ub[estim.iptw.cont$k == i] <- results.cont.iptw$p.up[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p11[estim.iptw.cont$k == i] <- results.cont.iptw$p[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p11.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.p[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p11.lb[estim.iptw.cont$k == i] <- results.cont.iptw$p.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$p11.ub[estim.iptw.cont$k == i] <- results.cont.iptw$p.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
# RD
estim.iptw.cont$RD_A1_A2is0[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RD_A1_A2is0.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.RD.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RD_A1_A2is0.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RD_A1_A2is0.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RD_A1_A2is1[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A1_A2is1.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.RD.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A1_A2is1.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A1_A2is1.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A1.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is0[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is0.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.RD.A2[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is0.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2.lo[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is0.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2.up[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is1[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is1.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.RD.A2[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is1.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RD_A2_A1is1.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RD.A2.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
# RR
estim.iptw.cont$RR_A1_A2is0[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RR_A1_A2is0.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.lnRR.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RR_A1_A2is0.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RR_A1_A2is0.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 0]
estim.iptw.cont$RR_A1_A2is1[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A1_A2is1.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.lnRR.A1[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A1_A2is1.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A1_A2is1.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A1.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is0[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is0.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.lnRR.A2[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is0.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2.lo[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is0.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2.up[results.cont.iptw$A1 == 0 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is1[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is1.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.lnRR.A2[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is1.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RR_A2_A1is1.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RR.A2.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
# a.INT
estim.iptw.cont$a.INT[estim.iptw.cont$k == i] <- results.cont.iptw$a.INT[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$a.INT.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.a.INT[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$a.INT.lb[estim.iptw.cont$k == i] <- results.cont.iptw$a.INT.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$a.INT.ub[estim.iptw.cont$k == i] <- results.cont.iptw$a.INT.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
# RERI
estim.iptw.cont$RERI[estim.iptw.cont$k == i] <- results.cont.iptw$RERI[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RERI.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.lnRERI[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RERI.lb[estim.iptw.cont$k == i] <- results.cont.iptw$RERI.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$RERI.ub[estim.iptw.cont$k == i] <- results.cont.iptw$RERI.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
# m.INT
estim.iptw.cont$m.INT[estim.iptw.cont$k == i] <- results.cont.iptw$m.INT[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$m.INT.se[estim.iptw.cont$k == i] <- results.cont.iptw$sd.ln.m.INT[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$m.INT.lb[estim.iptw.cont$k == i] <- results.cont.iptw$m.INT.lo[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
estim.iptw.cont$m.INT.ub[estim.iptw.cont$k == i] <- results.cont.iptw$m.INT.up[results.cont.iptw$A1 == 1 & results.cont.iptw$A2 == 1]
## g-computation estimation
Ycont.gcomp <- int.ltmleMSM(data = subset(df.simu, select = -c(Y.bin)),
Qform = Q_form_Ycont,
gform = g_form,
Anodes = c("fact.A1", "fact.A2"),
Lnodes = c("conf1", "conf2", "conf3"),
Ynodes = c("Y.cont"),
SL.library = list(Q=list("glm"),g=list("glm")),
gcomp = TRUE,
iptw.only = FALSE,
survivalOutcome = FALSE,
variance.method = "ic",
B = 200)
results.cont.gcomp <- estim.int.effects(Ycont.gcomp, estimator = "gcomp")$int.r
# save results
# p
estim.gcomp.cont$p00[estim.gcomp.cont$k == i] <- results.cont.gcomp$p[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p00.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.p[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p00.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.lo[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p00.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.up[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p10[estim.gcomp.cont$k == i] <- results.cont.gcomp$p[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p10.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.p[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p10.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p10.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$p01[estim.gcomp.cont$k == i] <- results.cont.gcomp$p[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p01.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.p[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p01.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.lo[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p01.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.up[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p11[estim.gcomp.cont$k == i] <- results.cont.gcomp$p[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p11.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.p[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p11.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$p11.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$p.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
# RD
estim.gcomp.cont$RD_A1_A2is0[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RD_A1_A2is0.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.RD.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RD_A1_A2is0.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RD_A1_A2is0.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RD_A1_A2is1[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A1_A2is1.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.RD.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A1_A2is1.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A1_A2is1.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A1.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is0[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is0.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.RD.A2[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is0.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2.lo[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is0.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2.up[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is1[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is1.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.RD.A2[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is1.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RD_A2_A1is1.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RD.A2.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
# RR
estim.gcomp.cont$RR_A1_A2is0[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RR_A1_A2is0.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.lnRR.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RR_A1_A2is0.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RR_A1_A2is0.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 0]
estim.gcomp.cont$RR_A1_A2is1[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A1_A2is1.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.lnRR.A1[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A1_A2is1.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A1_A2is1.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A1.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is0[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is0.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.lnRR.A2[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is0.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2.lo[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is0.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2.up[results.cont.gcomp$A1 == 0 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is1[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is1.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.lnRR.A2[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is1.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RR_A2_A1is1.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RR.A2.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
# a.INT
estim.gcomp.cont$a.INT[estim.gcomp.cont$k == i] <- results.cont.gcomp$a.INT[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$a.INT.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.a.INT[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$a.INT.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$a.INT.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$a.INT.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$a.INT.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
# RERI
estim.gcomp.cont$RERI[estim.gcomp.cont$k == i] <- results.cont.gcomp$RERI[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RERI.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.lnRERI[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RERI.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$RERI.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$RERI.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$RERI.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
# m.INT
estim.gcomp.cont$m.INT[estim.gcomp.cont$k == i] <- results.cont.gcomp$m.INT[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$m.INT.se[estim.gcomp.cont$k == i] <- results.cont.gcomp$sd.ln.m.INT[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$m.INT.lb[estim.gcomp.cont$k == i] <- results.cont.gcomp$m.INT.lo[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
estim.gcomp.cont$m.INT.ub[estim.gcomp.cont$k == i] <- results.cont.gcomp$m.INT.up[results.cont.gcomp$A1 == 1 & results.cont.gcomp$A2 == 1]
}
# save simulation results
saveRDS(estim.gcomp.cont, file = "./docs/estim_gcomp_cont")
saveRDS(estim.iptw.cont, file = "./docs/estim_iptw_cont")
saveRDS(estim.tmle.cont, file = "./docs/estim_tmle_cont")
estim_gcomp_cont <- readRDS(file = "./docs/estim_gcomp_cont")
estim_iptw_cont <- readRDS(file = "./docs/estim_iptw_cont")
estim_tmle_cont <- readRDS(file = "./docs/estim_tmle_cont")
perf.gcomp.cont <- data.frame(bias = rep(NA, 15),
var = rep(NA, 15),
std.bias = rep(NA, 15),
mse = rep(NA, 15),
av.estim.se = rep(NA, 15),
cov = rep(NA, 15))
row.names(perf.gcomp.cont) <- c("p00","p10","p01","p11",
"RD_A1_A2is0","RD_A1_A2is1","RD_A2_A1is0","RD_A2_A1is1",
"logRR_A1_A2is0","logRR_A1_A2is1","logRR_A2_A1is0","logRR_A2_A1is1",
"a.INT","log.m.INT","logRERI")
perf.iptw.cont <- perf.tmle.cont <- perf.gcomp.cont
## performance summary - gcomp
# p00
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p00")] <- mean(estim_gcomp_cont$p00) - p00
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p00")] <- mean((estim_gcomp_cont$p00 - mean(estim_gcomp_cont$p00))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "p00")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p00")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p00")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "p00")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p00")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p00")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "p00")] <- sqrt(mean(estim_gcomp_cont$p00.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "p00")] <- mean(as.numeric(p00 >= estim_gcomp_cont$p00.lb) & (p00 <= estim_gcomp_cont$p00.ub))
# p10
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p10")] <- mean(estim_gcomp_cont$p10) - p10
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p10")] <- mean((estim_gcomp_cont$p10 - mean(estim_gcomp_cont$p10))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "p10")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p10")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p10")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "p10")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p10")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p10")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "p10")] <- sqrt(mean(estim_gcomp_cont$p10.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "p10")] <- mean(as.numeric(p10 >= estim_gcomp_cont$p10.lb) & (p10 <= estim_gcomp_cont$p10.ub))
# p01
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p01")] <- mean(estim_gcomp_cont$p01) - p01
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p01")] <- mean((estim_gcomp_cont$p01 - mean(estim_gcomp_cont$p01))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "p01")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p01")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p01")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "p01")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p01")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p01")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "p01")] <- sqrt(mean(estim_gcomp_cont$p01.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "p01")] <- mean(as.numeric(p01 >= estim_gcomp_cont$p01.lb) & (p01 <= estim_gcomp_cont$p01.ub))
# p11
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p11")] <- mean(estim_gcomp_cont$p11) - p11
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p11")] <- mean((estim_gcomp_cont$p11 - mean(estim_gcomp_cont$p11))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "p11")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p11")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p11")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "p11")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "p11")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "p11")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "p11")] <- sqrt(mean(estim_gcomp_cont$p11.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "p11")] <- mean(as.numeric(p11 >= estim_gcomp_cont$p11.lb) & (p11 <= estim_gcomp_cont$p11.ub))
# RD_A1_A2is0
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- mean(estim_gcomp_cont$RD_A1_A2is0) - RD.bin_A1_A2is0
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- mean((estim_gcomp_cont$RD_A1_A2is0 - mean(estim_gcomp_cont$RD_A1_A2is0))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- sqrt(mean(estim_gcomp_cont$RD_A1_A2is0.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "RD_A1_A2is0")] <- mean(as.numeric(RD.bin_A1_A2is0 >= estim_gcomp_cont$RD_A1_A2is0.lb) & (RD.bin_A1_A2is0 <= estim_gcomp_cont$RD_A1_A2is0.ub))
# RD_A1_A2is1
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- mean(estim_gcomp_cont$RD_A1_A2is1) - RD.bin_A1_A2is1
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- mean((estim_gcomp_cont$RD_A1_A2is1 - mean(estim_gcomp_cont$RD_A1_A2is1))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- sqrt(mean(estim_gcomp_cont$RD_A1_A2is1.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "RD_A1_A2is1")] <- mean(as.numeric(RD.bin_A1_A2is1 >= estim_gcomp_cont$RD_A1_A2is1.lb) & (RD.bin_A1_A2is1 <= estim_gcomp_cont$RD_A1_A2is1.ub))
# RD_A2_A1is0
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- mean(estim_gcomp_cont$RD_A2_A1is0) - RD.bin_A2_A1is0
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- mean((estim_gcomp_cont$RD_A2_A1is0 - mean(estim_gcomp_cont$RD_A2_A1is0))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- sqrt(mean(estim_gcomp_cont$RD_A2_A1is0.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "RD_A2_A1is0")] <- mean(as.numeric(RD.bin_A2_A1is0 >= estim_gcomp_cont$RD_A2_A1is0.lb) & (RD.bin_A2_A1is0 <= estim_gcomp_cont$RD_A2_A1is0.ub))
# RD_A2_A1is1
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- mean(estim_gcomp_cont$RD_A2_A1is1) - RD.bin_A2_A1is1
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- mean((estim_gcomp_cont$RD_A2_A1is1 - mean(estim_gcomp_cont$RD_A2_A1is1))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- sqrt(mean(estim_gcomp_cont$RR_A1_A2is0.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "RD_A2_A1is1")] <- mean(as.numeric(RD.bin_A2_A1is1 >= estim_gcomp_cont$RD_A2_A1is1.lb) & (RD.bin_A2_A1is1 <= estim_gcomp_cont$RD_A2_A1is1.ub))
# logRR_A1_A2is0
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- mean(log(estim_gcomp_cont$RR_A1_A2is0)) - log(RR.bin_A1_A2is0)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- mean((log(estim_gcomp_cont$RR_A1_A2is0) - mean(log(estim_gcomp_cont$RR_A1_A2is0)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- sqrt(mean(estim_gcomp_cont$RD_A2_A1is1.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is0")] <- mean(as.numeric(RR.bin_A1_A2is0 > estim_gcomp_cont$RR_A1_A2is0.lb) & (RR.bin_A1_A2is0 < estim_gcomp_cont$RR_A1_A2is0.ub))
# logRR_A1_A2is1
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- mean(log(estim_gcomp_cont$RR_A1_A2is1)) - log(RR.bin_A1_A2is1)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- mean((log(estim_gcomp_cont$RR_A1_A2is1) - mean(log(estim_gcomp_cont$RR_A1_A2is1)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- sqrt(mean(estim_gcomp_cont$RR_A1_A2is1.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "logRR_A1_A2is1")] <- mean(as.numeric(RR.bin_A1_A2is1 > estim_gcomp_cont$RR_A1_A2is1.lb) & (RR.bin_A1_A2is1 < estim_gcomp_cont$RR_A1_A2is1.ub))
# logRR_A2_A1is0
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- mean(log(estim_gcomp_cont$RR_A2_A1is0)) - log(RR.bin_A2_A1is0)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- mean((log(estim_gcomp_cont$RR_A2_A1is0) - mean(log(estim_gcomp_cont$RR_A2_A1is0)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- sqrt(mean(estim_gcomp_cont$RR_A2_A1is0.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is0")] <- mean(as.numeric(RR.bin_A2_A1is0 > estim_gcomp_cont$RR_A2_A1is0.lb) & (RR.bin_A2_A1is0 < estim_gcomp_cont$RR_A2_A1is0.ub))
# logRR_A2_A1is1
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- mean(log(estim_gcomp_cont$RR_A2_A1is1)) - log(RR.bin_A2_A1is1)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- mean((log(estim_gcomp_cont$RR_A2_A1is1) - mean(log(estim_gcomp_cont$RR_A2_A1is1)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- sqrt(mean(estim_gcomp_cont$RR_A2_A1is1.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "logRR_A2_A1is1")] <- mean(as.numeric(RR.bin_A2_A1is1 > estim_gcomp_cont$RR_A2_A1is1.lb) & (RR.bin_A2_A1is1 < estim_gcomp_cont$RR_A2_A1is1.ub))
# a.INT
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "a.INT")] <- mean(estim_gcomp_cont$a.INT) - a.INT.bin
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "a.INT")] <- mean((estim_gcomp_cont$a.INT - mean(estim_gcomp_cont$a.INT))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "a.INT")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "a.INT")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "a.INT")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "a.INT")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "a.INT")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "a.INT")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "a.INT")] <- sqrt(mean(estim_gcomp_cont$a.INT.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "a.INT")] <- mean(as.numeric(a.INT.bin >= estim_gcomp_cont$a.INT.lb) & (a.INT.bin <= estim_gcomp_cont$a.INT.ub))
# log.m.INT
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- mean(log(estim_gcomp_cont$m.INT)) - log(m.INT.bin)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- mean((log(estim_gcomp_cont$m.INT) - mean(log(estim_gcomp_cont$m.INT)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "log.m.INT")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "log.m.INT")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "log.m.INT")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "log.m.INT")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- sqrt(mean(estim_gcomp_cont$m.INT.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "log.m.INT")] <- mean(as.numeric(m.INT.bin > estim_gcomp_cont$m.INT.lb) & (m.INT.bin < estim_gcomp_cont$m.INT.ub))
# logRERI
perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRERI")] <- mean(log(estim_gcomp_cont$RERI)) - log(RERI.bin)
perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRERI")] <- mean((log(estim_gcomp_cont$RERI) - mean(log(estim_gcomp_cont$RERI)))^2) * (nrow(estim_gcomp_cont)) / (nrow(estim_gcomp_cont) - 1)
perf.gcomp.cont$std.bias[which(row.names(perf.gcomp.cont) == "logRERI")] <- perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRERI")] / sqrt(perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRERI")])
perf.gcomp.cont$mse[which(row.names(perf.gcomp.cont) == "logRERI")] <- perf.gcomp.cont$var[which(row.names(perf.gcomp.cont) == "logRERI")] + (perf.gcomp.cont$bias[which(row.names(perf.gcomp.cont) == "logRERI")])^2
perf.gcomp.cont$av.estim.se[which(row.names(perf.gcomp.cont) == "logRERI")] <- sqrt(mean(estim_gcomp_cont$RERI.se^2))
perf.gcomp.cont$cov[which(row.names(perf.gcomp.cont) == "logRERI")] <- mean(as.numeric(RERI.bin > estim_gcomp_cont$RERI.lb) & (RERI.bin < estim_gcomp_cont$RERI.ub))
## performance summary - IPTW
# p00
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p00")] <- mean(estim_iptw_cont$p00) - p00
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p00")] <- mean((estim_iptw_cont$p00 - mean(estim_iptw_cont$p00))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "p00")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p00")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p00")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "p00")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p00")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p00")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "p00")] <- sqrt(mean(estim_iptw_cont$p00.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "p00")] <- mean(as.numeric(p00 >= estim_iptw_cont$p00.lb) & (p00 <= estim_iptw_cont$p00.ub))
# p10
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p10")] <- mean(estim_iptw_cont$p10) - p10
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p10")] <- mean((estim_iptw_cont$p10 - mean(estim_iptw_cont$p10))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "p10")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p10")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p10")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "p10")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p10")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p10")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "p10")] <- sqrt(mean(estim_iptw_cont$p10.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "p10")] <- mean(as.numeric(p10 >= estim_iptw_cont$p10.lb) & (p10 <= estim_iptw_cont$p10.ub))
# p01
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p01")] <- mean(estim_iptw_cont$p01) - p01
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p01")] <- mean((estim_iptw_cont$p01 - mean(estim_iptw_cont$p01))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "p01")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p01")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p01")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "p01")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p01")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p01")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "p01")] <- sqrt(mean(estim_iptw_cont$p01.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "p01")] <- mean(as.numeric(p01 >= estim_iptw_cont$p01.lb) & (p01 <= estim_iptw_cont$p01.ub))
# p11
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p11")] <- mean(estim_iptw_cont$p11) - p11
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p11")] <- mean((estim_iptw_cont$p11 - mean(estim_iptw_cont$p11))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "p11")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p11")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p11")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "p11")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "p11")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "p11")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "p11")] <- sqrt(mean(estim_iptw_cont$p11.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "p11")] <- mean(as.numeric(p11 >= estim_iptw_cont$p11.lb) & (p11 <= estim_iptw_cont$p11.ub))
# RD_A1_A2is0
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- mean(estim_iptw_cont$RD_A1_A2is0) - RD.bin_A1_A2is0
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- mean((estim_iptw_cont$RD_A1_A2is0 - mean(estim_iptw_cont$RD_A1_A2is0))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- sqrt(mean(estim_iptw_cont$RD_A1_A2is0.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "RD_A1_A2is0")] <- mean(as.numeric(RD.bin_A1_A2is0 >= estim_iptw_cont$RD_A1_A2is0.lb) & (RD.bin_A1_A2is0 <= estim_iptw_cont$RD_A1_A2is0.ub))
# RD_A1_A2is1
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- mean(estim_iptw_cont$RD_A1_A2is1) - RD.bin_A1_A2is1
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- mean((estim_iptw_cont$RD_A1_A2is1 - mean(estim_iptw_cont$RD_A1_A2is1))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- sqrt(mean(estim_iptw_cont$RD_A1_A2is1.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "RD_A1_A2is1")] <- mean(as.numeric(RD.bin_A1_A2is1 >= estim_iptw_cont$RD_A1_A2is1.lb) & (RD.bin_A1_A2is1 <= estim_iptw_cont$RD_A1_A2is1.ub))
# RD_A2_A1is0
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- mean(estim_iptw_cont$RD_A2_A1is0) - RD.bin_A2_A1is0
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- mean((estim_iptw_cont$RD_A2_A1is0 - mean(estim_iptw_cont$RD_A2_A1is0))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- sqrt(mean(estim_iptw_cont$RD_A2_A1is0.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "RD_A2_A1is0")] <- mean(as.numeric(RD.bin_A2_A1is0 >= estim_iptw_cont$RD_A2_A1is0.lb) & (RD.bin_A2_A1is0 <= estim_iptw_cont$RD_A2_A1is0.ub))
# RD_A2_A1is1
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- mean(estim_iptw_cont$RD_A2_A1is1) - RD.bin_A2_A1is1
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- mean((estim_iptw_cont$RD_A2_A1is1 - mean(estim_iptw_cont$RD_A2_A1is1))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- sqrt(mean(estim_iptw_cont$RR_A1_A2is0.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "RD_A2_A1is1")] <- mean(as.numeric(RD.bin_A2_A1is1 >= estim_iptw_cont$RD_A2_A1is1.lb) & (RD.bin_A2_A1is1 <= estim_iptw_cont$RD_A2_A1is1.ub))
# logRR_A1_A2is0
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- mean(log(estim_iptw_cont$RR_A1_A2is0)) - log(RR.bin_A1_A2is0)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- mean((log(estim_iptw_cont$RR_A1_A2is0) - mean(log(estim_iptw_cont$RR_A1_A2is0)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- sqrt(mean(estim_iptw_cont$RD_A2_A1is1.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "logRR_A1_A2is0")] <- mean(as.numeric(RR.bin_A1_A2is0 > estim_iptw_cont$RR_A1_A2is0.lb) & (RR.bin_A1_A2is0 < estim_iptw_cont$RR_A1_A2is0.ub))
# logRR_A1_A2is1
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- mean(log(estim_iptw_cont$RR_A1_A2is1)) - log(RR.bin_A1_A2is1)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- mean((log(estim_iptw_cont$RR_A1_A2is1) - mean(log(estim_iptw_cont$RR_A1_A2is1)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- sqrt(mean(estim_iptw_cont$RR_A1_A2is1.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "logRR_A1_A2is1")] <- mean(as.numeric(RR.bin_A1_A2is1 > estim_iptw_cont$RR_A1_A2is1.lb) & (RR.bin_A1_A2is1 < estim_iptw_cont$RR_A1_A2is1.ub))
# logRR_A2_A1is0
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- mean(log(estim_iptw_cont$RR_A2_A1is0)) - log(RR.bin_A2_A1is0)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- mean((log(estim_iptw_cont$RR_A2_A1is0) - mean(log(estim_iptw_cont$RR_A2_A1is0)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- sqrt(mean(estim_iptw_cont$RR_A2_A1is0.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "logRR_A2_A1is0")] <- mean(as.numeric(RR.bin_A2_A1is0 > estim_iptw_cont$RR_A2_A1is0.lb) & (RR.bin_A2_A1is0 < estim_iptw_cont$RR_A2_A1is0.ub))
# logRR_A2_A1is1
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- mean(log(estim_iptw_cont$RR_A2_A1is1)) - log(RR.bin_A2_A1is1)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- mean((log(estim_iptw_cont$RR_A2_A1is1) - mean(log(estim_iptw_cont$RR_A2_A1is1)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- sqrt(mean(estim_iptw_cont$RR_A2_A1is1.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "logRR_A2_A1is1")] <- mean(as.numeric(RR.bin_A2_A1is1 > estim_iptw_cont$RR_A2_A1is1.lb) & (RR.bin_A2_A1is1 < estim_iptw_cont$RR_A2_A1is1.ub))
# a.INT
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "a.INT")] <- mean(estim_iptw_cont$a.INT) - a.INT.bin
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "a.INT")] <- mean((estim_iptw_cont$a.INT - mean(estim_iptw_cont$a.INT))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "a.INT")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "a.INT")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "a.INT")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "a.INT")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "a.INT")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "a.INT")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "a.INT")] <- sqrt(mean(estim_iptw_cont$a.INT.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "a.INT")] <- mean(as.numeric(a.INT.bin >= estim_iptw_cont$a.INT.lb) & (a.INT.bin <= estim_iptw_cont$a.INT.ub))
# log.m.INT
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "log.m.INT")] <- mean(log(estim_iptw_cont$m.INT)) - log(m.INT.bin)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "log.m.INT")] <- mean((log(estim_iptw_cont$m.INT) - mean(log(estim_iptw_cont$m.INT)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "log.m.INT")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "log.m.INT")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "log.m.INT")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "log.m.INT")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "log.m.INT")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "log.m.INT")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "log.m.INT")] <- sqrt(mean(estim_iptw_cont$m.INT.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "log.m.INT")] <- mean(as.numeric(m.INT.bin > estim_iptw_cont$m.INT.lb) & (m.INT.bin < estim_iptw_cont$m.INT.ub))
# logRERI
perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRERI")] <- mean(log(estim_iptw_cont$RERI)) - log(RERI.bin)
perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRERI")] <- mean((log(estim_iptw_cont$RERI) - mean(log(estim_iptw_cont$RERI)))^2) * (nrow(estim_iptw_cont)) / (nrow(estim_iptw_cont) - 1)
perf.iptw.cont$std.bias[which(row.names(perf.iptw.cont) == "logRERI")] <- perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRERI")] / sqrt(perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRERI")])
perf.iptw.cont$mse[which(row.names(perf.iptw.cont) == "logRERI")] <- perf.iptw.cont$var[which(row.names(perf.iptw.cont) == "logRERI")] + (perf.iptw.cont$bias[which(row.names(perf.iptw.cont) == "logRERI")])^2
perf.iptw.cont$av.estim.se[which(row.names(perf.iptw.cont) == "logRERI")] <- sqrt(mean(estim_iptw_cont$RERI.se^2))
perf.iptw.cont$cov[which(row.names(perf.iptw.cont) == "logRERI")] <- mean(as.numeric(RERI.bin > estim_iptw_cont$RERI.lb) & (RERI.bin < estim_iptw_cont$RERI.ub))
## performance summary - TMLE
# p00
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p00")] <- mean(estim_tmle_cont$p00) - p00
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p00")] <- mean((estim_tmle_cont$p00 - mean(estim_tmle_cont$p00))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "p00")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p00")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p00")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "p00")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p00")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p00")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "p00")] <- sqrt(mean(estim_tmle_cont$p00.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "p00")] <- mean(as.numeric(p00 >= estim_tmle_cont$p00.lb) & (p00 <= estim_tmle_cont$p00.ub))
# p10
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p10")] <- mean(estim_tmle_cont$p10) - p10
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p10")] <- mean((estim_tmle_cont$p10 - mean(estim_tmle_cont$p10))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "p10")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p10")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p10")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "p10")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p10")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p10")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "p10")] <- sqrt(mean(estim_tmle_cont$p10.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "p10")] <- mean(as.numeric(p10 >= estim_tmle_cont$p10.lb) & (p10 <= estim_tmle_cont$p10.ub))
# p01
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p01")] <- mean(estim_tmle_cont$p01) - p01
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p01")] <- mean((estim_tmle_cont$p01 - mean(estim_tmle_cont$p01))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "p01")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p01")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p01")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "p01")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p01")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p01")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "p01")] <- sqrt(mean(estim_tmle_cont$p01.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "p01")] <- mean(as.numeric(p01 >= estim_tmle_cont$p01.lb) & (p01 <= estim_tmle_cont$p01.ub))
# p11
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p11")] <- mean(estim_tmle_cont$p11) - p11
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p11")] <- mean((estim_tmle_cont$p11 - mean(estim_tmle_cont$p11))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "p11")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p11")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p11")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "p11")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "p11")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "p11")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "p11")] <- sqrt(mean(estim_tmle_cont$p11.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "p11")] <- mean(as.numeric(p11 >= estim_tmle_cont$p11.lb) & (p11 <= estim_tmle_cont$p11.ub))
# RD_A1_A2is0
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- mean(estim_tmle_cont$RD_A1_A2is0) - RD.bin_A1_A2is0
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- mean((estim_tmle_cont$RD_A1_A2is0 - mean(estim_tmle_cont$RD_A1_A2is0))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- sqrt(mean(estim_tmle_cont$RD_A1_A2is0.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "RD_A1_A2is0")] <- mean(as.numeric(RD.bin_A1_A2is0 >= estim_tmle_cont$RD_A1_A2is0.lb) & (RD.bin_A1_A2is0 <= estim_tmle_cont$RD_A1_A2is0.ub))
# RD_A1_A2is1
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- mean(estim_tmle_cont$RD_A1_A2is1) - RD.bin_A1_A2is1
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- mean((estim_tmle_cont$RD_A1_A2is1 - mean(estim_tmle_cont$RD_A1_A2is1))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- sqrt(mean(estim_tmle_cont$RD_A1_A2is1.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "RD_A1_A2is1")] <- mean(as.numeric(RD.bin_A1_A2is1 >= estim_tmle_cont$RD_A1_A2is1.lb) & (RD.bin_A1_A2is1 <= estim_tmle_cont$RD_A1_A2is1.ub))
# RD_A2_A1is0
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- mean(estim_tmle_cont$RD_A2_A1is0) - RD.bin_A2_A1is0
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- mean((estim_tmle_cont$RD_A2_A1is0 - mean(estim_tmle_cont$RD_A2_A1is0))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- sqrt(mean(estim_tmle_cont$RD_A2_A1is0.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "RD_A2_A1is0")] <- mean(as.numeric(RD.bin_A2_A1is0 >= estim_tmle_cont$RD_A2_A1is0.lb) & (RD.bin_A2_A1is0 <= estim_tmle_cont$RD_A2_A1is0.ub))
# RD_A2_A1is1
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- mean(estim_tmle_cont$RD_A2_A1is1) - RD.bin_A2_A1is1
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- mean((estim_tmle_cont$RD_A2_A1is1 - mean(estim_tmle_cont$RD_A2_A1is1))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- sqrt(mean(estim_tmle_cont$RR_A1_A2is0.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "RD_A2_A1is1")] <- mean(as.numeric(RD.bin_A2_A1is1 >= estim_tmle_cont$RD_A2_A1is1.lb) & (RD.bin_A2_A1is1 <= estim_tmle_cont$RD_A2_A1is1.ub))
# logRR_A1_A2is0
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- mean(log(estim_tmle_cont$RR_A1_A2is0)) - log(RR.bin_A1_A2is0)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- mean((log(estim_tmle_cont$RR_A1_A2is0) - mean(log(estim_tmle_cont$RR_A1_A2is0)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- sqrt(mean(estim_tmle_cont$RD_A2_A1is1.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "logRR_A1_A2is0")] <- mean(as.numeric(RR.bin_A1_A2is0 > estim_tmle_cont$RR_A1_A2is0.lb) & (RR.bin_A1_A2is0 < estim_tmle_cont$RR_A1_A2is0.ub))
# logRR_A1_A2is1
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- mean(log(estim_tmle_cont$RR_A1_A2is1)) - log(RR.bin_A1_A2is1)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- mean((log(estim_tmle_cont$RR_A1_A2is1) - mean(log(estim_tmle_cont$RR_A1_A2is1)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- sqrt(mean(estim_tmle_cont$RR_A1_A2is1.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "logRR_A1_A2is1")] <- mean(as.numeric(RR.bin_A1_A2is1 > estim_tmle_cont$RR_A1_A2is1.lb) & (RR.bin_A1_A2is1 < estim_tmle_cont$RR_A1_A2is1.ub))
# logRR_A2_A1is0
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- mean(log(estim_tmle_cont$RR_A2_A1is0)) - log(RR.bin_A2_A1is0)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- mean((log(estim_tmle_cont$RR_A2_A1is0) - mean(log(estim_tmle_cont$RR_A2_A1is0)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- sqrt(mean(estim_tmle_cont$RR_A2_A1is0.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "logRR_A2_A1is0")] <- mean(as.numeric(RR.bin_A2_A1is0 > estim_tmle_cont$RR_A2_A1is0.lb) & (RR.bin_A2_A1is0 < estim_tmle_cont$RR_A2_A1is0.ub))
# logRR_A2_A1is1
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- mean(log(estim_tmle_cont$RR_A2_A1is1)) - log(RR.bin_A2_A1is1)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- mean((log(estim_tmle_cont$RR_A2_A1is1) - mean(log(estim_tmle_cont$RR_A2_A1is1)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- sqrt(mean(estim_tmle_cont$RR_A2_A1is1.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "logRR_A2_A1is1")] <- mean(as.numeric(RR.bin_A2_A1is1 > estim_tmle_cont$RR_A2_A1is1.lb) & (RR.bin_A2_A1is1 < estim_tmle_cont$RR_A2_A1is1.ub))
# a.INT
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "a.INT")] <- mean(estim_tmle_cont$a.INT) - a.INT.bin
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "a.INT")] <- mean((estim_tmle_cont$a.INT - mean(estim_tmle_cont$a.INT))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "a.INT")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "a.INT")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "a.INT")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "a.INT")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "a.INT")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "a.INT")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "a.INT")] <- sqrt(mean(estim_tmle_cont$a.INT.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "a.INT")] <- mean(as.numeric(a.INT.bin >= estim_tmle_cont$a.INT.lb) & (a.INT.bin <= estim_tmle_cont$a.INT.ub))
# log.m.INT
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "log.m.INT")] <- mean(log(estim_tmle_cont$m.INT)) - log(m.INT.bin)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "log.m.INT")] <- mean((log(estim_tmle_cont$m.INT) - mean(log(estim_tmle_cont$m.INT)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "log.m.INT")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "log.m.INT")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "log.m.INT")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "log.m.INT")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "log.m.INT")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "log.m.INT")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "log.m.INT")] <- sqrt(mean(estim_tmle_cont$m.INT.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "log.m.INT")] <- mean(as.numeric(m.INT.bin > estim_tmle_cont$m.INT.lb) & (m.INT.bin < estim_tmle_cont$m.INT.ub))
# logRERI
perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRERI")] <- mean(log(estim_tmle_cont$RERI)) - log(RERI.bin)
perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRERI")] <- mean((log(estim_tmle_cont$RERI) - mean(log(estim_tmle_cont$RERI)))^2) * (nrow(estim_tmle_cont)) / (nrow(estim_tmle_cont) - 1)
perf.tmle.cont$std.bias[which(row.names(perf.tmle.cont) == "logRERI")] <- perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRERI")] / sqrt(perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRERI")])
perf.tmle.cont$mse[which(row.names(perf.tmle.cont) == "logRERI")] <- perf.tmle.cont$var[which(row.names(perf.tmle.cont) == "logRERI")] + (perf.tmle.cont$bias[which(row.names(perf.tmle.cont) == "logRERI")])^2
perf.tmle.cont$av.estim.se[which(row.names(perf.tmle.cont) == "logRERI")] <- sqrt(mean(estim_tmle_cont$RERI.se^2))
perf.tmle.cont$cov[which(row.names(perf.tmle.cont) == "logRERI")] <- mean(as.numeric(RERI.bin > estim_tmle_cont$RERI.lb) & (RERI.bin < estim_tmle_cont$RERI.ub))
# save simulation results
saveRDS(perf.gcomp.cont, file = "./docs/perf_gcomp_cont")
saveRDS(perf.iptw.cont, file = "./docs/perf_iptw_cont")
saveRDS(perf.tmle.cont, file = "./docs/perf_tmle_cont")
perf.gcomp.cont
perf.iptw.cont
perf.tmle.cont
